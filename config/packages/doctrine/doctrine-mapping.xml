<doctrine-mapping xmlns="http://doctrine-project.org/schemas/orm/doctrine-mapping"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://doctrine-project.org/schemas/orm/doctrine-mapping
                   https://raw.github.com/doctrine/doctrine2/master/doctrine-mapping.xsd">
    
    <entity name="App\Entity\Hero">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-many  field="faction"       target-entity="Faction"         mapped-by="heroes"      />
        <one-to-one   field="capaciteHero"  target-entity="CapaciteHero"    mapped-by="hero"        />
        <many-to-many field="competences"   target-entity="Competence"                              />
        <many-to-many field="capacites"     target-entity="Capacite"                                />
        <many-to-many field="armee"         target-entity="Peloton"                                 />
        <many-to-many field="sortsDepart"   target-entity="Sort"                                    />

        <field name="nom"               type="string"   />
        <field name="description"       type="text"     />
        <field name="attaque"           type="smallint" />
        <field name="defense"           type="smallint" />
        <field name="puissanceMagique"  type="smallint" />
        <field name="esprit"            type="smallint" />
        <field name="mana"              type="smallint" />
        <field name="moral"             type="smallint" />
        <field name="chance"            type="smallint" />

    </entity>

    <entity name="App\Entity\Faction">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-one   field="competence"        target-entity="Competence"      mapped-by="heroes"   />
        <one-to-many  field="terrainBase"       target-entity="TerrainBase"     mapped-by="factions" />
        <many-to-one  field="heroes"            target-entity="Hero"            mapped-by="faction"  />
        <many-to-many field="magiesPreferees"   target-entity="Magie"                                />
        <many-to-many field="specialisations"   target-entity="Specialisation"                       />

        <field name="nomFaction"        type="string"   />
        <field name="nomHero"           type="string"   />
        <field name="description"       type="text"     />
        <field name="defense"           type="smallint" />
        <field name="puissanceMagique"  type="smallint" />
        <field name="esprit"            type="smallint" />
        <field name="mana"              type="smallint" />
        <field name="moral"             type="smallint" />
        <field name="chance"            type="smallint" />

    </entity>

    <entity name="App\Entity\TerrainBase">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <many-to-one field="factions"        target-entity="Faction"         mapped-by="terrainBase" />
        <one-to-one  field="coutDeplacement" target-entity="CoutDeplacement" mapped-by="terrainBase" />

        <field name="nom" type="string" />

    </entity>

    <entity name="App\Entity\Magie">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-many  field="sorts"              target-entity="Sort"    mapped-by="magie" />
        <many-to-many field="factionsPreference" target-entity="Faction"                   />

        <field name="nom"         type="string" />
        <field name="description" type="text"   />

    </entity>

    <entity name="App\Entity\Competence">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <many-to-many field="capacites" target-entity="Capacite" />

        <field name="nom"         type="string" />
        <field name="description" type="text"   />
        <field name="unique"      type="boolean"   />

    </entity>

    <entity name="App\Entity\CoutDeplacement">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-one field="terrainOrigine" target-entity="TerrainBase" mapped-by="coutDeplacement" />

        <field name="terrain"     type="string"  />
        <field name="penalite" type="text"    />

    </entity>

    <entity name="App\Entity\EstimationNbCreature">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <field name="nom"      type="string" />
        <field name="quantite" type="string" />

    </entity>

    <entity name="App\Entity\Sort">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <many-to-one  field="magie"              target-entity="Magie"    mapped-by="sorts" />
        <many-to-many field="heroes"             target-entity="Hero"                       />

        <field name="nom"           type="string"   />
        <field name="description"   type="text"     />
        <field name="coutMana"      type="smallint" />

    </entity>

    <entity name="App\Entity\Peloton">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-many field="hero"     target-entity="Hero"     mapped-by="armee"    />
        <one-to-many field="creature" target-entity="Creature" mapped-by="peletons" />

        <field name="quantite" type="smallint" />

    </entity>
    
    <entity name="App\Entity\Specialisation">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-one  field="ville" target-entity="Ville" mapped-by="specialisation" />

        <field name="nom"         type="string" />
        <field name="description" type="text"   />

    </entity>
    
    <entity name="App\Entity\Ville">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-one  field="specialisation" target-entity="Specialisation" mapped-by="ville" />
        <one-to-one  field="faction"        target-entity="Faction"        mapped-by="ville" />
        <one-to-many field="batiments"      target-entity="Batiment"       mapped-by="ville" />

        <field name="nom" type="string" />
        <field name="description" type="text" />

    </entity>
    
    <entity name="App\Entity\Batiment">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-one   field="batimentNecessaire" target-entity="Batiment"                                />
        <one-to-one   field="artefactNecessaire" target-entity="Artefact"                                />
        <one-to-one   field="ville"              target-entity="Ville"                                   />
        <one-to-many  field="creaturesProduites" target-entity="Creature" mapped-by="batimentProducteur" />
        <many-to-many field="coutRessources"     target-entity="Ressource"                               />
        
        <field name="nom"         type="string"     />
        <field name="description" type="text"       />
        <field name="niveauVille" type="smallint"   />

    </entity>
    
    <entity name="App\Entity\Artefact">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <many-to-one field="panoplie"      target-entity="Panoplie"  mapped-by="artefacts" />
        <many-to-one field="coutRessource" target-entity="Ressource" mapped-by="artefacts" />
        
        <field name="nom"           type="string"   />
        <field name="description"   type="text"     />
        <field name="emplacement"   type="string"   />
        <field name="importance"    type="string"   />

    </entity>
    
    <entity name="App\Entity\Panoplie">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>

        <one-to-many field="artefacts" target-entity="Artefact" mapped-by="panoplie" />
        
        <field name="nom"         type="string" />
        <field name="description" type="text"   />

    </entity>
    
    <entity name="App\Entity\Semaine">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
        <field name="nom"         type="string" />
        <field name="description" type="text"   />

    </entity>
    
    <entity name="App\Entity\Capacite" inheritance-type="JOINED">
        
        <discriminator-map>
            <discriminator-mapping value="CapaciteHero"     class="App\Entity\CapaciteHero"     />
            <discriminator-mapping value="CapaciteCreature" class="App\Entity\CapaciteCreature" />
        </discriminator-map>
        
        <one-to-many  field="competenceRequise" target-entity="Competence" mapped-by="capacites" />
        <many-to-many field="capacitesRequises" target-entity="Capacite"                         />
        
        <discriminator-column name="nom"          type="string" />
        <discriminator-column name="description " type="text"   />
        
    </entity>
    
    <entity name="App\Entity\CapaciteHero">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
        <one-to-one field="hero" target-entity="Hero" mapped-by="capaciteHero" />

    </entity>
    
    <entity name="App\Entity\CapaciteCreature">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
    </entity>
    
    <entity name="App\Entity\Creature">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
        <one-to-many  field="faction"        target-entity="Faction"   mapped-by="creatures" />
        <many-to-many field="capacites"      target-entity="Capacite"                        />
        <many-to-many field="coutRessources" target-entity="Ressource"                       />
        
        <field name="nom"               type="string"   />
        <field name="description"       type="text"     />
        <field name="attaque"           type="smallint" />
        <field name="defense"           type="smallint" />
        <field name="puissanceMagique"  type="smallint" />
        <field name="esprit"            type="smallint" />
        <field name="dommageMin"        type="smallint" />
        <field name="dommageMax"        type="smallint" />
        <field name="pdv"               type="smallint" />
        <field name="initiative"        type="smallint" />
        <field name="vitesse"           type="smallint" />
        <field name="tirs"              type="smallint" />
        <field name="mana"              type="smallint" />
        <field name="croissance"        type="smallint" />
        <field name="moral"             type="smallint" />
        <field name="chance"            type="smallint" />
        
    </entity>
    
    <entity name="App\Entity\Ressource">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
        <many-to-one field="artefacts"        target-entity="Artefact"        mapped-by="coutRessource" />
        <many-to-one field="machinesDeGuerre" target-entity="MachineDeGuerre" mapped-by="coutRessource" />
        
        <field name="nom"      type="string"   />
        <field name="quantite" type="smallint" />
        
    </entity>
    
    <entity name="App\Entity\MachineDeGuerre">

        <id name="id" type="integer" column="id">
            <generator strategy="IDENTITY" />
        </id>
        
        <many-to-one field="coutRessource" target-entity="Ressource" mapped-by="machinesDeGuerre" />
        
        <field name="nom"         type="string" />
        <field name="description" type="text"   />
        
    </entity>
    
</doctrine-mapping>